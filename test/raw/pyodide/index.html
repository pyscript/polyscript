<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <script type="module">
      globalThis.test = () => new Proxy(() => 1, {
        apply(target, thisArg, argumentsList) {
          for (const k in thisArg);
          return target(...argumentsList);
        }
      });
      const base = 'https://cdn.jsdelivr.net/npm/pyodide@latest';
      const { loadPyodide } = await import(`${base}/pyodide.mjs`);
      const interpreter = await loadPyodide();
      const { textContent } = document.querySelector('script[type=pyodide]');
      interpreter.runPythonAsync(textContent);
    </script>
    <script type="pyodide" async>
      import js
      js.test()()
    </script>
  </head>
</html>
