<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
        <title>named workers</title>
        <script type="module" src="/dist/index.js"></script>
    </head>
    <body>
        <script type="micropython" async>
            from polyscript import workers

            await (await workers["mpy"]).greetings()
            await (await workers["py"]).greetings()

            # print(await (await workers["mpy"]).__export__)
            print(list(await (await workers["mpy"]).test()))
        </script>
        <script type="micropython" worker name="mpy">
            def greetings():
                print("micropython")

            def test():
                return __export__

            __export__ = ['greetings', 'test']
        </script>
        <script type="pyodide" worker name="py">
            def greetings():
                print("pyodide")

            def test():
                return __export__

            __export__ = ['greetings', 'test']
        </script>
    </body>
</html>
